%----------------------------------------------------------------------------------------
%   OpenCOR
%----------------------------------------------------------------------------------------

\providecommand{\rootfolder}{../..} % Relative path to main.tex
\documentclass[\rootfolder/main.tex]{subfiles}
\begin{document}
\section{CellML}

OpenCOR is an open source simulation package made for the biology field.
It is modular to the point where all features are in the form of plugins \cite{10.3389/fphys.2015.00026}.
OpenCOR uses two input languages, CellML and SED-ML, both XML-based markup languages, to describe the model and the simulation setup respectively.
The software includes an editor for each language so that the user can create models without writing XML directly.

\subsection{Language features}

CellML \cite{cuellar2003} is an XML-based format that is used to describe the structure of models.
The information included in the model can broadly be described as twofold.
First, it includes the various parts of the model, and how these are combined into the complete model.
This information is specified separately from the simulation specification, as we shall see later.
Second, the language allows for metadata to be added to the model, in order to categorize and organize models and model parts.

To specify the model we have used previously, in CellML, we first define the units that are used in the model.
The CellML specification includes SI units, but it is useful to define complex units and give them a descriptive name.

\begin{listing}[ht]
    \inputminted[fontsize=\footnotesize, lastline=27]{matlab}{\rootfolder/Models/OpenCOR/Inertial.input}
    \caption{Unit definitions for the inertial system\label{lst:inertial-cellml-units}}
\end{listing}

Then, the defined units are used to specify the model.
The model specification is similar to the Modelica code from \ref{Chapter02}.

\begin{listing}[ht]
    \inputminted[fontsize=\footnotesize, firstline=28]{matlab}{\rootfolder/Models/OpenCOR/Inertial.input}
    \caption{Model definition for the inertial system\label{lst:inertial-cellml-units}}
\end{listing}

This is turned into MathML, which would be tedious to write manually, behind the scenes.

Being an XML-based standard, CellML is extensible.
In addition to the above, CellML allows for model designers to add information written in other XML-based languages to the model.
This can be equations written in MathML, textual and graphical documentation in HTML (currently planned), data sets and so on.

While CellML is mainly used in biology, it is designed to be domain independent.
The language is flexible enough that is is used to implement purely biological as well as electrochemical and mechanical models \cite{cuellar2003}

CellML models are constructed as a network of interconnected components.
The components may contain variables as well as mathematical equations specified with MathML.
Variables belong to a single component, but may be mapped to a variable in another component by specifying a connection.
Two components may only have one connection, and all variable mappings must therefore be declared in the same place
This is intended to enforce a level of organization to the sometimes complex mappings between components \cite{cuellar2003}.

Variables in CellML are always expressed in units.
This ensures rigor when shared models are connected, as incompatible variables cannot be mapped to one another.
For example a variable declared in units of meters cannot be mapped to another variable with mass units, for instance kilograms.
However, it is perfectly possible to connect a variable using kilograms to one using pounds, and have the units automatically converted.
This is possible by defining new units in terms of the dictionary of standard units included with CellML, which include the base and derived SI units.
This allows researchers to work in their preferred units, and still share their work with the rest of the scientific community \cite{cuellar2003}.

Models can be structured using grouping.
CellML provides two types of groups, encapsulation and containment.
In an encapsulating group, only one component in the group is accessible to components outside the group, in effect acting as an interface.
By using a containment group the modeller can specify that one component contains another, which allows a physical organization of the model.

\subsubsection{Metadata}

Metadata in CellML models can include information about the author, references to literature and various information that puts the model into the proper biological context \cite{cuellar2003}.
This information allows other researchers to search for

\subsubsection{Model sharing}

\end{document}
